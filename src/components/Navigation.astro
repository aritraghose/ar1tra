---
import { Slash, User, Library, FolderClosed, Send } from "@lucide/astro";

const navItems = [
	{ href: "/", icon: Slash, label: "Root" },
	{ href: "/about", icon: User, label: "About" },
	{ href: "/posts", icon: Library, label: "Posts" },
	{ href: "/projects", icon: FolderClosed, label: "Projects" },
	{ href: "/connect", icon: Send, label: "Connect" },
];

const currentPath = Astro.url.pathname;
const isActive = (href: string) => href === "/" ? currentPath === "/" : currentPath.startsWith(href);
---

<nav class="fixed left-4 top-1/2 -translate-y-1/2 z-50 hidden md:block">
	<div class="flex flex-col gap-1 bg-[#FFFEF5]/80 backdrop-blur-xl border border-gray-200/80 rounded-full p-2 shadow-md shadow-black/5 dark:shadow-black/30">
		{navItems.map((item) => (
			<a
				href={item.href}
				class:list={[
					"w-10 h-10 flex items-center justify-center rounded-full transition-colors relative group",
					isActive(item.href) ? "nav-active" : "text-gray-500 dark:text-gray-400 hover:bg-black/10 dark:hover:bg-white/20 hover:text-gray-900 dark:hover:text-white"
				]}
				aria-label={item.label}
			>
				<item.icon size={18} />
				<span class="absolute left-full ml-3 top-1/2 -translate-y-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
					{item.label}
				</span>
			</a>
		))}
	</div>
</nav>

<!-- Mobile navigation -->
<nav id="mobile-nav" class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 md:hidden transition-transform duration-300">
	<div class="flex gap-1 bg-[#FFFEF5]/80 backdrop-blur-xl border border-gray-200/80 rounded-full p-2 shadow-md shadow-black/5 dark:shadow-black/30">
		{navItems.map((item) => (
			<a
				href={item.href}
				class:list={[
					"w-10 h-10 flex items-center justify-center rounded-full transition-colors relative group",
					isActive(item.href) ? "nav-active" : "text-gray-500 dark:text-gray-400 hover:bg-black/10 dark:hover:bg-white/20 hover:text-gray-900 dark:hover:text-white"
				]}
				aria-label={item.label}
			>
				<item.icon size={18} />
				<span class="absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
					{item.label}
				</span>
			</a>
		))}
	</div>
</nav>

<script>
	const mobileNav = document.getElementById('mobile-nav');
	let lastScrollY = window.scrollY;

	window.addEventListener('scroll', () => {
		if (window.scrollY > lastScrollY && window.scrollY > 50) {
			mobileNav?.classList.add('translate-y-20');
		} else {
			mobileNav?.classList.remove('translate-y-20');
		}
		lastScrollY = window.scrollY;
	});
</script>
